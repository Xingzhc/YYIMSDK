YYIMChat=function(e){var t=e.constructor,r=function(){function r(r){jQuery.ajax({url:e.getConfig().SERVLET.REST_USER_SERVLET+e.getConfig().MULTI_TENANCY.ETP_KEY+"/"+e.getConfig().MULTI_TENANCY.APP_KEY+"/"+t.getInstance().getUserID()+"/profile?token="+t.getInstance().getToken(),type:"get",cache:!1,datatype:"json",success:function(t){if(t.muteItems){var o={};for(var n in t.muteItems){var s=e.getJIDUtil().getID(t.muteItems[n]),c=e.getJIDUtil().getChatTypeByJid(t.muteItems[n]);o[s]={id:s,type:c}}t.muteItems=o}if(t.stickItems){var o={};for(var n in t.stickItems){var s=e.getJIDUtil().getID(t.stickItems[n]),c=e.getJIDUtil().getChatTypeByJid(t.stickItems[n]);o[s]={id:s,type:c}}t.stickItems=o}t.userId&&(t.userId=e.getJIDUtil().getID(t.userId)),r.success&&r.success(t),r=null},error:function(e){try{r.error&&r.error(JSON.parse(e.responseText)),r=null}catch(e){r.error&&r.error(),r=null}}})}function o(r){var o;o=r.type==e.getConstants().CHAT_TYPE.GROUP_CHAT?e.getJIDUtil().buildChatGroupJID(e.getJIDUtil().getNode(r.to)):r.type==e.getConstants().CHAT_TYPE.PUB_ACCOUNT?e.getJIDUtil().buildPubAccountJID(e.getJIDUtil().getNode(r.to)):e.getJIDUtil().buildUserJID(e.getJIDUtil().getNode(r.to)),r.handle="mute"===r.handle?r.handle:"stick",jQuery.ajax({url:e.getConfig().SERVLET.REST_USER_SERVLET+e.getConfig().MULTI_TENANCY.ETP_KEY+"/"+e.getConfig().MULTI_TENANCY.APP_KEY+"/"+t.getInstance().getUserID()+"/profile/"+r.handle+"?token="+t.getInstance().getToken(),type:"post",data:JSON.stringify({bareJID:o}),dataType:"json",cache:!1,processData:!1,contentType:"application/json",success:function(e){r.success&&r.success({id:r.to,type:r.type}),r=null},error:function(e){try{r.error&&r.error(JSON.parse(e.responseText)),r=null}catch(e){r.error&&r.error(),r=null}}})}function n(r){var o;o=r.type==e.getConstants().CHAT_TYPE.GROUP_CHAT?e.getJIDUtil().buildChatGroupJID(e.getJIDUtil().getNode(r.to)):r.type==e.getConstants().CHAT_TYPE.PUB_ACCOUNT?e.getJIDUtil().buildPubAccountJID(e.getJIDUtil().getNode(r.to)):e.getJIDUtil().buildUserJID(e.getJIDUtil().getNode(r.to)),jQuery.ajax({url:e.getConfig().SERVLET.REST_USER_SERVLET+e.getConfig().MULTI_TENANCY.ETP_KEY+"/"+e.getConfig().MULTI_TENANCY.APP_KEY+"/"+t.getInstance().getUserID()+"/profile/"+("mute"===r.handle?"mute":"stick")+"?token="+t.getInstance().getToken()+"&bareJID="+o,type:"DELETE",dataType:"json",success:function(e){r.success&&r.success({id:r.to,type:r.type}),r=null},error:function(e){try{r.error&&r.error(JSON.parse(e.responseText)),r=null}catch(e){r.error&&r.error(),r=null}}})}function s(r){jQuery.ajax({url:e.getConfig().SERVLET.REST_USER_SERVLET+e.getConfig().MULTI_TENANCY.ETP_KEY+"/"+e.getConfig().MULTI_TENANCY.APP_KEY+"/"+t.getInstance().getUserID()+"/profile?token="+t.getInstance().getToken(),type:"post",data:JSON.stringify(r.profile),dataType:"json",cache:!1,processData:!1,contentType:"application/json",success:function(e){r.success&&r.success(r.profile),r=null},error:function(e){try{r.error&&r.error(JSON.parse(e.responseText)),r=null}catch(e){r.error&&r.error(),r=null}}})}function c(r){jQuery.ajax({url:e.getConfig().SERVLET.REST_USER_SERVLET+e.getConfig().MULTI_TENANCY.ETP_KEY+"/"+e.getConfig().MULTI_TENANCY.APP_KEY+"/"+t.getInstance().getUserID()+"/profile?token="+t.getInstance().getToken(),type:"PUT",data:JSON.stringify(r.profiles),dataType:"json",cache:!1,processData:!1,contentType:"application/json",success:function(e){r.success&&r.success(r.profiles),r=null},error:function(e){try{r.error&&r.error(JSON.parse(e.responseText)),r=null}catch(e){r.error&&r.error(),r=null}}})}function i(r){jQuery.ajax({url:e.getConfig().SERVLET.REST_USER_SERVLET+e.getConfig().MULTI_TENANCY.ETP_KEY+"/"+e.getConfig().MULTI_TENANCY.APP_KEY+"/"+t.getInstance().getUserID()+"/profile?token="+t.getInstance().getToken(),type:"DELETE",dataType:"json",cache:!1,success:function(e){r.success&&r.success(),r=null},error:function(e){try{r.error&&r.error(JSON.parse(e.responseText)),r=null}catch(e){r.error&&r.error(),r=null}}})}function u(r){jQuery.ajax({url:e.getConfig().SERVLET.REST_USER_SERVLET+e.getConfig().MULTI_TENANCY.ETP_KEY+"/"+e.getConfig().MULTI_TENANCY.APP_KEY+"/"+t.getInstance().getUserID()+"/profile/groupassistant?token="+t.getInstance().getToken()+"&bareJID="+e.getJIDUtil().buildChatGroupJID(e.getJIDUtil().getNode(r.id)),type:"DELETE",dataType:"json",cache:!1,success:function(e){r.success&&r.success(),r=null},error:function(e){try{r.error&&r.error(JSON.parse(e.responseText)),r=null}catch(e){r.error&&r.error(),r=null}}})}return{getProfile:r,muteStick:o,cancelMuteStick:n,createProfile:s,removeProfile:c,clearProfile:i,removeGroupAssistant:u}}();return t.prototype.getProfile=function(e){r.getProfile(e||{})},t.prototype.mute=function(e){e=e||{},e.to?(e.handle="mute",r.muteStick(e)):e.error&&e.error()},t.prototype.stick=function(e){e=e||{},e.to?(e.handle="stick",r.muteStick(e)):e.error&&e.error()},t.prototype.cancelMute=function(e){var t=this;e&&e.to?r.cancelMuteStick({to:e.to,type:e.type,handle:"mute",success:function(r){e.type==t.getConstants().CHAT_TYPE.GROUP_CHAT?t.removeGroupAssistant({id:e.to,success:function(){e.success&&e.success(r)},error:e.error}):e.success&&e.success(r)},error:e.error}):e&&e.error&&e.error()},t.prototype.cancelStick=function(e){e&&e.to?(e.handle="stick",r.cancelMuteStick(e)):e&&e.error&&e.error()},t.prototype.createProfile=function(e){e=e||{},e.profile?r.createProfile(e):e.error&&e.error()},t.prototype.removeProfile=function(e){e=e||{},YYIMArrayUtil.isArray(e.profiles)?r.removeProfile(e):e.error&&e.error()},t.prototype.clearProfile=function(e){r.clearProfile(e||{})},t.prototype.removeGroupAssistant=function(e){e&&e.id?r.removeGroupAssistant(e):e&&e.error&&e.error()},t.getInstance()}(YYIMChat);